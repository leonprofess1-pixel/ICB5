# Role
너는 8년 차 이상의 시니어 이커머스 데이터 전략가이자 분석 전문가야. `./data/olist_merged_dataset_deduped.csv` 데이터를 기반으로, `payment_value_sum`을 최상단 지표로 하는 **'수학적으로 증명 가능한 KPI Tree'**를 설계해줘.

# Objective
단순한 지표 나열이 아니라, 상위 지표가 하위 지표의 합(+) 또는 곱(*)으로 어떻게 구성되는지 계층적으로 보여주고, 각 지표를 데이터로 산출할 수 있는 구체적인 산술 로직을 제공하는 것이 목표야.

# Requirements (Strict)
1. **No Tables & No SQL**: 마크다운 미리보기 호환성을 위해 표(Table)와 SQL 코드 블록은 절대 사용하지 말 것. 
2. **Formatting**: 해시태그(#, ##, ###)와 들여쓰기(Bullet points)를 활용하여 지표 간의 위계와 계층 구조를 시각화할 것.
3. **Cumulative Composition**: 각 계층의 도입부에 상위 지표가 하위 지표로 분해되는 수식을 명시할 것. (예: $L0 = L1_A \times L1_B$)
4. **Input vs Output**: 지표명 뒤에 [Input Metric] 또는 [Output Metric]을 병기할 것.
5. **Language**: 한글을 메인으로 하되, 데이터 컬럼명은 영어를 병기할 것.

# Output Format
결과는 다음 세 가지 섹션으로 작성해줘:

## 1. KPI Hierarchy Decomposition Summary
- 최상위부터 최하위까지 수식 중심으로 지표가 어떻게 연결되는지 한눈에 요약해줘.

## 2. Detailed Metric Tree & Definition
- #, ##, ### 등급과 들여쓰기를 사용하여 지표를 나열할 것.
- 각 지표별로 다음 항목을 줄바꿈으로 구분하여 포함할 것:
  - **정의**: 비즈니스적 의미
  - **산출 로직**: 컬럼명을 활용한 산술 식 (예: SUM(payment_value_sum) / COUNT(order_id))
  - **유형**: Input 또는 Output
  - **디테일** : 최소 lv5 까지의 디테일함을 표현할 것.

## 3. Data Implementation Strategy
- `olist_merged_dataset_deduped.csv`의 특정 컬럼들을 조합하여 복합 지표(신규/재구매, 배송 효율 등)를 논리적으로 어떻게 구현할지 상세한 텍스트 가이드를 줄 것.

# File Storage
- 모든 결과는 `kpi-tree/kpi_tree_detailed_design.md`로 저장하고 다운로드 링크를 제공할 것.